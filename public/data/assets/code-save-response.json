{
  "claim_generator": "LivingContent/1.0.0",
  "claim_generator_info": [{ "name": "Living Content", "version": "1.0.0" }],
  "title": "Response Saver",
  "format": "application/vnd.livingcontent.code+python",
  "instance_id": "urn:uuid:code-save-response",

  "assertions": [
    {
      "label": "c2pa.actions",
      "data": {
        "actions": [{
          "action": "c2pa.created",
          "digitalSourceType": "http://cv.iptc.org/newscodes/digitalsourcetype/algorithmicMedia",
          "softwareAgent": { "name": "Living Content Pipeline", "version": "1.0.0" },
          "when": "2026-01-14T18:15:35Z"
        }]
      }
    },
    {
      "label": "lco.code",
      "data": {
        "function": "_record_response_lineage",
        "module": "core.tasks.query",
        "computation": "save_response",
        "hash": "sha256:jkl012mno345pqr678jkl012mno345pqr678jkl012mno345pqr678jkl012mn"
      }
    },
    {
      "label": "lco.execution",
      "data": {
        "execution_start_time": "1768414514.774692",
        "execution_end_time": "1768414514.7758641",
        "execution_duration_ms": 1.17,
        "previous_function": "generate_response",
        "next_function": null
      }
    }
  ],

  "source_code": "@chain_link(computation=\"save_response\", output_asset_type=\"document\")\nasync def _record_response_lineage(\n    query_ctx,\n    full_response: str,\n) -> dict:\n    \"\"\"Record response in lineage graph.\n\n    Note: Actual message persistence is handled by core/tasks/query.py\n    after streaming completes. This function only creates the lineage entry.\n    \"\"\"\n    return {\n        \"response_length\": len(full_response),\n        \"request_message_id\": query_ctx.request_message_id,\n        \"response_message_id\": query_ctx.response_message_id,\n    }",

  "claim": {
    "type": "certificate",
    "provider": "LCO",
    "alg": "ES256",
    "issuer": "did:key:zQ3shwc61yUNaJZBX2L9mZd3xhWjTEqD52dA3JxBnZnu78E3d",
    "time": "2026-01-14T18:15:35Z"
  }
}
