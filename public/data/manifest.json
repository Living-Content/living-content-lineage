{
  "$schema": "https://livingcontent.org/schemas/lineage/v1.json",
  "manifest_type": "custom",
  "version": "1.0.0",
  "lineage_id": "e12a317d-5365-474e-ae24-d22de0514954",
  "title": "What's in the database?",
  "description": "A retrieval-augmented generation pipeline that processes user questions through multiple AI stages to produce informed answers.",
  "content_session_id": "2f7fbc02-40e7-4b5d-8ede-fff8541f976c",
  "user_id": "a128Ig5YR6RmZIp5JX1WeMmRArA2",
  "created": "2026-01-14T18:15:18Z",

  "active_manifest": "urn:uuid:lineage-001",
  "manifests": {
    "urn:uuid:lineage-001": {
      "claim_generator": "LivingContent/1.0.0",
      "claim_generator_info": [{ "name": "Living Content", "version": "1.0.0" }],
      "title": "Knowledge Query Pipeline",
      "format": "application/vnd.livingcontent.lineage+json",
      "instance_id": "urn:uuid:lineage-001",
      "assertions": [
        {
          "label": "c2pa.actions",
          "data": {
            "actions": [{
              "action": "c2pa.created",
              "digitalSourceType": "http://cv.iptc.org/newscodes/digitalsourcetype/trainedAlgorithmicMedia",
              "softwareAgent": { "name": "Living Content Pipeline", "version": "1.0.0" },
              "when": "2026-01-14T18:15:35Z"
            }]
          }
        }
      ],
      "signature_info": {
        "alg": "ES256",
        "issuer": "did:key:zQ3shwc61yUNaJZBX2L9mZd3xhWjTEqD52dA3JxBnZnu78E3d",
        "time": "2026-01-14T18:15:35Z"
      }
    }
  },

  "workflows": [
    { "id": "ingest", "label": "Ingest", "type": "ingest", "phase": "Acquisition" },
    { "id": "select", "label": "Select", "type": "select", "phase": "Preparation" },
    { "id": "retrieve", "label": "Retrieve", "type": "retrieve", "phase": "Retrieval" },
    { "id": "reflect", "label": "Reflect", "type": "reflect", "phase": "Reasoning" },
    { "id": "plan", "label": "Plan", "type": "plan", "phase": "Reasoning" },
    { "id": "search", "label": "Search", "type": "search", "phase": "Retrieval" },
    { "id": "evaluate", "label": "Evaluate", "type": "evaluate", "phase": "Reasoning" },
    { "id": "generate", "label": "Generate", "type": "generate", "phase": "Generation" },
    { "id": "store", "label": "Store", "type": "store", "phase": "Persistence" }
  ],

  "computations": [
    {
      "id": "comp-consume-query",
      "label": "Consume",
      "title": "Query Validator",
      "workflowId": "ingest",
      "description": "Receives and validates the user's question, preparing it for the AI pipeline.",
      "duration": "21ms",
      "inputs": ["data-user-query"],
      "outputs": ["data-consumed-query"]
    },
    {
      "id": "comp-select-tool",
      "label": "Select",
      "title": "Tool Selector",
      "workflowId": "select",
      "description": "Uses AI to analyze the question and pick the right tool to answer it.",
      "duration": "1.8s",
      "inputs": ["data-consumed-query", "model-select-tool", "code-select-tool"],
      "outputs": ["data-selected-tool"]
    },
    {
      "id": "comp-retrieve-history",
      "label": "Retrieve",
      "title": "History Retriever",
      "workflowId": "retrieve",
      "description": "Looks up previous messages in this conversation for context.",
      "duration": "357ms",
      "inputs": ["data-selected-tool", "code-retrieve-history"],
      "outputs": ["data-retrieved-history"]
    },
    {
      "id": "comp-reflect",
      "label": "Reflect",
      "title": "Intent Analyzer",
      "workflowId": "reflect",
      "description": "Analyzes what the user really wants to know beyond the literal question.",
      "duration": "1.2s",
      "inputs": ["data-retrieved-history", "model-reflect", "code-reflect"],
      "outputs": ["data-reflection"]
    },
    {
      "id": "comp-plan",
      "label": "Plan",
      "title": "Strategy Planner",
      "workflowId": "plan",
      "description": "Creates a strategy for finding the best information to answer the question.",
      "duration": "800ms",
      "inputs": ["data-reflection", "model-plan", "code-plan"],
      "outputs": ["data-plan"]
    },
    {
      "id": "comp-retrieve",
      "label": "Search",
      "title": "Knowledge Retriever",
      "workflowId": "search",
      "description": "Searches the knowledge base to find relevant documents and information.",
      "duration": "2.1s",
      "inputs": ["data-plan", "code-retrieve"],
      "outputs": ["data-retrieved-docs"]
    },
    {
      "id": "comp-evaluate",
      "label": "Evaluate",
      "title": "Relevance Evaluator",
      "workflowId": "evaluate",
      "description": "Uses AI to score and rank retrieved documents by relevance.",
      "duration": "1.5s",
      "inputs": ["data-retrieved-docs", "model-evaluate", "code-evaluate"],
      "outputs": ["data-evaluation"]
    },
    {
      "id": "comp-generate-response",
      "label": "Generate",
      "title": "Response Generator",
      "workflowId": "generate",
      "description": "Uses Claude to synthesize the information into a helpful answer.",
      "duration": "12s",
      "inputs": ["data-evaluation", "model-generate-response", "code-generate-response"],
      "outputs": ["data-generated-response"]
    },
    {
      "id": "comp-save-response",
      "label": "Save",
      "title": "Response Archiver",
      "workflowId": "store",
      "description": "Saves the response and records its complete provenance chain.",
      "duration": "1ms",
      "inputs": ["data-generated-response", "code-save-response"],
      "outputs": ["data-saved-response"]
    }
  ],

  "assets": [
    {
      "id": "data-user-query",
      "label": "User Query",
      "asset_type": "Document",
      "description": "The original question asked by the user: \"What's in the database?\"",
      "manifest_url": "./assets/data-user-query.json"
    },
    {
      "id": "data-consumed-query",
      "label": "Consumed",
      "title": "Validated Query",
      "asset_type": "DataObject",
      "description": "The user's question after parsing and validation, ready for processing."
    },
    {
      "id": "model-select-tool",
      "label": "Select",
      "title": "Gemini 2.5 Flash",
      "asset_type": "Model",
      "description": "Gemini 2.5 Flash - Google's lightweight model optimized for speed. Fast inference with low latency, ideal for quick classification tasks.",
      "manifest_url": "./assets/model-select-tool.json",
      "tokens": { "input": 132, "output": 15 }
    },
    {
      "id": "code-select-tool",
      "label": "Select",
      "title": "Tool Router",
      "asset_type": "Code",
      "description": "Analyzes the query and chooses the best tool to answer it. Selected the knowledge query tool.",
      "manifest_url": "./assets/code-select-tool.json"
    },
    {
      "id": "data-selected-tool",
      "label": "Selected",
      "title": "Tool Selection",
      "asset_type": "DataObject",
      "description": "The decision to use the knowledge query tool for answering this question.",
      "manifest_url": "./assets/data-selected-tool.json"
    },
    {
      "id": "code-retrieve-history",
      "label": "Retrieve",
      "title": "History Lookup",
      "asset_type": "Code",
      "description": "Fetches previous messages from the conversation for context.",
      "manifest_url": "./assets/code-retrieve-history.json"
    },
    {
      "id": "data-retrieved-history",
      "label": "Retrieved History",
      "title": "Conversation History",
      "asset_type": "Dataset",
      "description": "No previous messages were found - this is the start of a new conversation."
    },
    {
      "id": "model-reflect",
      "label": "Reflect",
      "title": "Gemini 2.5 Flash",
      "asset_type": "Model",
      "description": "Gemini 2.5 Flash - Google's lightweight model optimized for speed. Cost-effective for high-volume analysis tasks.",
      "tokens": { "input": 245, "output": 89 }
    },
    {
      "id": "code-reflect",
      "label": "Reflect",
      "title": "Intent Analyzer",
      "asset_type": "Code",
      "description": "Examines the query to identify the user's underlying intent and information needs.",
      "manifest_url": "./assets/code-reflect.json"
    },
    {
      "id": "data-reflection",
      "label": "Reflected",
      "title": "User Intent",
      "asset_type": "DataObject",
      "description": "Determined that the user wants to explore and understand the database contents.",
      "manifest_url": "./assets/data-reflection.json"
    },
    {
      "id": "model-plan",
      "label": "Plan",
      "title": "Gemini 2.5 Flash",
      "asset_type": "Model",
      "description": "Gemini 2.5 Flash - Google's lightweight model optimized for speed. Efficient for structured planning and reasoning tasks.",
      "tokens": { "input": 312, "output": 156 }
    },
    {
      "id": "code-plan",
      "label": "Plan",
      "title": "Strategy Builder",
      "asset_type": "Code",
      "description": "Develops a step-by-step plan for searching and retrieving knowledge.",
      "manifest_url": "./assets/code-plan.json"
    },
    {
      "id": "data-plan",
      "label": "Planned",
      "title": "Search Strategy",
      "asset_type": "DataObject",
      "description": "The search strategy: query the knowledge base for database content overview.",
      "manifest_url": "./assets/data-plan.json"
    },
    {
      "id": "code-retrieve",
      "label": "Search",
      "title": "Knowledge Search",
      "asset_type": "Code",
      "description": "Searches the knowledge base using the planned strategy.",
      "manifest_url": "./assets/code-retrieve.json"
    },
    {
      "id": "data-retrieved-docs",
      "label": "Search Results",
      "title": "Retrieved Documents",
      "asset_type": "Dataset",
      "description": "Documents and records found in the knowledge base matching the query.",
      "manifest_url": "./assets/data-retrieved-docs.json"
    },
    {
      "id": "model-evaluate",
      "label": "Evaluate",
      "title": "Claude Sonnet 4.5",
      "asset_type": "Model",
      "description": "Claude Sonnet 4.5 - Anthropic's standard-tier model. Balances capability and cost, strong at nuanced evaluation and judgment tasks.",
      "tokens": { "input": 1847, "output": 312 }
    },
    {
      "id": "code-evaluate",
      "label": "Evaluate",
      "title": "Relevance Scorer",
      "asset_type": "Code",
      "description": "Scores and ranks the retrieved documents based on relevance to the question."
    },
    {
      "id": "data-evaluation",
      "label": "Evaluated",
      "title": "Relevance Rankings",
      "asset_type": "DataObject",
      "description": "The ranked list of documents deemed most useful for answering the question."
    },
    {
      "id": "model-generate-response",
      "label": "Generate",
      "title": "Claude Sonnet 4.5",
      "asset_type": "Model",
      "description": "Claude Sonnet 4.5 - Anthropic's standard-tier model. Excellent at synthesis and natural language generation with nuanced understanding.",
      "manifest_url": "./assets/model-generate-response.json",
      "tokens": { "input": 2156, "output": 847 }
    },
    {
      "id": "code-generate-response",
      "label": "Generate",
      "title": "Response Composer",
      "asset_type": "Code",
      "description": "Synthesizes the evaluated information into a coherent, helpful response.",
      "manifest_url": "./assets/code-generate-response.json"
    },
    {
      "id": "data-generated-response",
      "label": "Generated",
      "title": "Generated Answer",
      "asset_type": "Document",
      "description": "The complete answer explaining what's in the database - a collection of digital art.",
      "manifest_url": "./assets/data-generated-response.json"
    },
    {
      "id": "code-save-response",
      "label": "Save",
      "title": "Response Saver",
      "asset_type": "Code",
      "description": "Records the response and its lineage for future reference and auditing.",
      "manifest_url": "./assets/code-save-response.json"
    },
    {
      "id": "data-saved-response",
      "label": "Saved",
      "title": "Saved Response",
      "asset_type": "DataObject",
      "description": "The response has been saved to the conversation history for continuity."
    }
  ],

  "attestations": [
    {
      "id": "attest-generate",
      "label": "Attestation",
      "workflowId": "generate",
      "verifies": ["data-generated-response"],
      "description": "Cryptographic proof that this response was generated in a secure, tamper-proof environment."
    }
  ]
}
